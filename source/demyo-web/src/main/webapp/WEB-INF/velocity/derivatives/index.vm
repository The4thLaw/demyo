#setPageTitle('title.index.derivative')

#@fabs()
	#fab('./add', 'add')
#end

#macro(derivativeLegendContent $entity $wrapDetails)
	<a href="$link.contextPath/derivatives/view/$entity.id">
		#if ($entity.series)
			<p>$entity.series.identifyingName</p>
		#else ($entity.album)
			<p>$entity.album.identifyingName</p>
		#end
		#if ($wrapDetails)<div class="dem-thumb-legend__details">#end
			#if ($entity.series && $entity.album)
				<p>$entity.album.identifyingName</p>
			#end
			#if ($entity.artist)
				<p>$entity.artist.identifyingName</p>
			#end
			#if ($entity.source)
				<p>$entity.source.identifyingName</p>
			#end
			<p>$entity.type.identifyingName</p>
		#if ($wrapDetails)</div>#end
	</a>
#end

#@thumbCardListCustomBody($derivativeList "identifyingName" false)
	<div class="mdl-card mdl-shadow--2dp dem-model-card dem-model-card--thumb">
		#if($entity.mainImage)
			#@thumbnail($entity.mainImage, {})
				<button class="mdl-button mdl-js-button mdl-button--icon dem-thumb-legend__expander">
					#icon('ellipsis_v')
				</button>
				#derivativeLegendContent($entity, true)
			#end
		#else
			<legend class="dem-thumb-legend">
				#derivativeLegendContent($entity, false)
			</legend>
		#end
	</div>
#end

$paging.pageLinks($derivativeList, $request, $javascript)
